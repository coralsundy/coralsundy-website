---
layout: default
---

{% assign years = "" -%}
{% for post in site.posts -%}
  {% assign y = post.date | date: "%Y" -%}
  {% unless years contains y -%}
    {% assign years = years | append: y | append: "," -%}
  {% endunless -%}
{% endfor -%}

{% assign years = years | split: "," | sort | reverse -%}

<!-- Year Navigation -->
<div class="archive">
<h3>| <a href="#Pinned">Pinned</a> |
  {% for y in years %}
    {% unless y == "" %}
      <a href="#{{ y }}">{{ y }}</a> |
    {% endunless %}
  {% endfor %}
</h3>
</div>


<div class="archive">

    {% assign tempPinnedNum = 0 -%}

    <h1 class="archive-year" id="Pinned" ><a href="#Pinned">Pinned</a></h1>
    <details open>
    <summary class="summary-item">Click to hide or show all the pinned posts</summary>
    {%- for post in site.posts -%} 
        {%- if post.pinned == true -%}
        {% assign tempPinnedNum = tempPinnedNum | plus: 1 -%}
            <div class="archive-item">
              <div class="archive-row">
                <div class="archive-date post-date archive-date fs-4">{{ post.date | date: "%Y-%m-%d" }} &raquo; </div>
                <div class="archive-title">
                  <a style="font-weight:bold;" href="{{ post.url | relative_url }}" class="archive-title fs-4">{{ post.title }}</a>
                </div>
              </div>
            </div>
        {%- endif -%}
    {%- endfor -%}
    </details>

    <!-- Pinned section specific assigned initial value for Total Post Number -->
    {% assign tempPostNum = tempPinnedNum -%}

    <!-- Try to define the latest new post -->
    {% assign newPost = 0 -%}

    {%- for post in site.posts -%} 
        {% assign postYear = post.date | date: "%Y" -%}
        {% assign currYear = 'now' | date: "%Y" -%}
        {%- if post.private == true -%}
              {%- continue -%}
        {%- endif -%}

        {%- if postYear != postDateTemp -%}
            {%- if postDateTemp != nil -%}
            </details>
            {%- endif -%}

            <i>(Total Posts: {{ tempPostNum }})</i>

            {% assign postDateTemp = postYear -%}

            <h1 class="archive-year" id={{ postYear }}><a href="#{{ postYear }}">{{ postYear }}</a></h1>
            {%- if postYear <= '2020' -%}
                <details>
                {% assign tempPostNum = 0 -%}
            {%- else -%}
                <details open>
                {% assign tempPostNum = 0 -%}
            {%- endif -%}
            <summary class="summary-item">Click to hide or show all the posts from year {{ postYear }}</summary>

        {%- endif -%}

        <!-- Only add the new button on the very latest post -->
        {%- if newPost == 0 -%}
            <div class="archive-item">
              <div class="archive-row">
                <span class="post-date archive-date fs-4">{{ post.date | date: "%Y-%m-%d" }} &raquo; &#127381; </span>
                <div class="archive-title">
                  <a href="{{ post.url | relative_url }}" class="fs-4" style="font-weight: bold;">{{ post.title }}</a>
                </div>
              </div>
            </div>
            {% assign newPost = newPost | plus: 1 -%}
        {%- else -%}
            <div class="archive-item">
              <div class="archive-row">
                <div class="archive-date">{{ post.date | date: "%Y-%m-%d" }} &raquo;</div>
                <div class="archive-title">
                  <a href="{{ post.url | relative_url }}" class="fs-4" style="font-weight: bold;">{{ post.title }}</a>
                </div>
              </div>
            </div>
        {%- endif -%}
        {% assign tempPostNum = tempPostNum | plus: 1 -%}
    {%- endfor -%}


    <!-- Reserve for the ending section of the archive -->
    </details>
    <i>(Total Posts: {{ tempPostNum }})</i>

</div>
